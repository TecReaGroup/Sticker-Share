# è¡¨æƒ…åŒ…ç®¡ç†åº”ç”¨ - å®Œæ•´é…ç½®æŒ‡å—

## ğŸ“‹ ç›®å½•

1. [å‰ç½®è¦æ±‚](#å‰ç½®è¦æ±‚)
2. [å¾®ä¿¡å¼€æ”¾å¹³å°é…ç½®](#å¾®ä¿¡å¼€æ”¾å¹³å°é…ç½®)
3. [é¡¹ç›®é…ç½®](#é¡¹ç›®é…ç½®)
4. [iOSé…ç½®](#iosé…ç½®)
5. [Androidé…ç½®](#androidé…ç½®)
6. [æµ‹è¯•æŒ‡å—](#æµ‹è¯•æŒ‡å—)
7. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## å‰ç½®è¦æ±‚

### å¼€å‘ç¯å¢ƒ
- Flutter SDK >= 3.0.0
- Dart SDK >= 3.0.0
- Xcode >= 14.0 (iOSå¼€å‘)
- Android Studio >= 2022.1 (Androidå¼€å‘)

### å¿…è¦è´¦å·
- å¾®ä¿¡å¼€æ”¾å¹³å°è´¦å·ï¼ˆç”¨äºè·å–AppIDï¼‰
- Apple Developerè´¦å·ï¼ˆiOSçœŸæœºæµ‹è¯•ï¼‰

---

## å¾®ä¿¡å¼€æ”¾å¹³å°é…ç½®

### 1. æ³¨å†Œå¼€æ”¾å¹³å°è´¦å·

è®¿é—® [å¾®ä¿¡å¼€æ”¾å¹³å°](https://open.weixin.qq.com/)

### 2. åˆ›å»ºç§»åŠ¨åº”ç”¨

1. ç™»å½•åï¼Œè¿›å…¥"ç®¡ç†ä¸­å¿ƒ"
2. é€‰æ‹©"ç§»åŠ¨åº”ç”¨" â†’ "åˆ›å»ºç§»åŠ¨åº”ç”¨"
3. å¡«å†™åº”ç”¨ä¿¡æ¯ï¼š
   - åº”ç”¨åç§°ï¼šè¡¨æƒ…åŒ…ç®¡ç†
   - åº”ç”¨ç®€ä»‹ï¼šè¡¨æƒ…åŒ…åˆ†äº«å·¥å…·
   - åº”ç”¨å›¾æ ‡ï¼šä¸Šä¼ åº”ç”¨å›¾æ ‡
   
### 3. è·å–AppID

åˆ›å»ºæˆåŠŸåï¼Œåœ¨åº”ç”¨è¯¦æƒ…é¡µå¯ä»¥çœ‹åˆ°ï¼š
- AppID: `wx1234567890abcdef` (ç¤ºä¾‹)
- AppSecret: (ä¿å¯†ï¼Œä¸åœ¨å®¢æˆ·ç«¯ä½¿ç”¨)

### 4. é…ç½®åº”ç”¨ç­¾å

#### iOSé…ç½®
- Bundle ID: `com.example.stickerShare`

#### Androidé…ç½®
- åº”ç”¨åŒ…å: `com.example.sticker_share`
- åº”ç”¨ç­¾å: éœ€è¦ç”Ÿæˆå¹¶æäº¤åº”ç”¨ç­¾å

---

## é¡¹ç›®é…ç½®

### 1. å…‹éš†/ä¸‹è½½é¡¹ç›®

```bash
cd /path/to/sticker_share
flutter pub get
```

### 2. é…ç½®å¾®ä¿¡AppID

æ‰“å¼€ [`lib/screens/home_screen.dart`](lib/screens/home_screen.dart:309)ï¼Œæ›¿æ¢AppIDï¼š

```dart
final success = await WeChatShareService.shareGifToWeChat(
  gifData: gifData,
  appId: 'wx1234567890abcdef', // æ›¿æ¢ä¸ºä½ çš„å¾®ä¿¡AppID
);
```

---

## iOSé…ç½®

### 1. é…ç½®Info.plist

æ–‡ä»¶å·²é…ç½®å®Œæˆï¼š[`ios/Runner/Info.plist`](ios/Runner/Info.plist)

åŒ…å«ä»¥ä¸‹é…ç½®ï¼š
```xml
<key>LSApplicationQueriesSchemes</key>
<array>
    <string>weixin</string>
    <string>weixinULAPI</string>
</array>
```

### 2. é…ç½®Bundle ID

1. æ‰“å¼€ `ios/Runner.xcworkspace`
2. é€‰æ‹© Runner target
3. ä¿®æ”¹ Bundle Identifier ä¸ºä½ åœ¨å¾®ä¿¡å¼€æ”¾å¹³å°æ³¨å†Œçš„å€¼

### 3. é…ç½®ç­¾å

1. åœ¨ Xcode çš„ "Signing & Capabilities" é€‰é¡¹å¡
2. é€‰æ‹©ä½ çš„ Team
3. ç¡®ä¿ "Automatically manage signing" å·²å‹¾é€‰

### 4. è¿è¡Œæµ‹è¯•

```bash
# è¿æ¥iOSè®¾å¤‡
flutter run -d ios

# æˆ–ä½¿ç”¨æ¨¡æ‹Ÿå™¨
flutter run -d "iPhone 14 Pro"
```

---

## Androidé…ç½®

### 1. é…ç½®AndroidManifest.xml

æ–‡ä»¶å·²é…ç½®å®Œæˆï¼š[`android/app/src/main/AndroidManifest.xml`](android/app/src/main/AndroidManifest.xml)

åŒ…å«ä»¥ä¸‹é…ç½®ï¼š
- æƒé™å£°æ˜ï¼ˆINTERNETã€WRITE_EXTERNAL_STORAGEç­‰ï¼‰
- FileProvideré…ç½®
- WeChatåŒ…æŸ¥è¯¢é…ç½®

### 2. é…ç½®åº”ç”¨ç­¾å

#### ç”Ÿæˆç­¾åæ–‡ä»¶

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
keytool -genkey -v -keystore android/app/sticker_share.keystore -alias sticker_share -keyalg RSA -keysize 2048 -validity 10000

# è¾“å…¥å¯†ç å’Œç›¸å…³ä¿¡æ¯
```

#### è·å–åº”ç”¨ç­¾å

```bash
keytool -list -v -keystore android/app/sticker_share.keystore -alias sticker_share
```

å¤åˆ¶ MD5 æŒ‡çº¹ï¼Œæäº¤åˆ°å¾®ä¿¡å¼€æ”¾å¹³å°ã€‚

#### é…ç½®ç­¾åï¼ˆå¯é€‰ï¼‰

åˆ›å»º `android/key.properties`:

```properties
storePassword=your_password
keyPassword=your_password
keyAlias=sticker_share
storeFile=sticker_share.keystore
```

ä¿®æ”¹ [`android/app/build.gradle.kts`](android/app/build.gradle.kts) æ·»åŠ ç­¾åé…ç½®ã€‚

### 3. è¿è¡Œæµ‹è¯•

```bash
# è¿æ¥Androidè®¾å¤‡
flutter run -d android

# æˆ–ä½¿ç”¨æ¨¡æ‹Ÿå™¨
flutter run -d emulator-5554
```

---

## æµ‹è¯•æŒ‡å—

### 1. åŠ è½½æµ‹è¯•è¡¨æƒ…åŒ…

åº”ç”¨é¦–æ¬¡å¯åŠ¨æ—¶ï¼š
1. ä¼šæ˜¾ç¤º"æš‚æ— è¡¨æƒ…åŒ…"
2. ç‚¹å‡»"åŠ è½½æµ‹è¯•è¡¨æƒ…åŒ…"æŒ‰é’®
3. åŠ è½½ [`assets/stickers/`](assets/stickers/) ç›®å½•ä¸­çš„GIF

### 2. æµ‹è¯•åŸºæœ¬åŠŸèƒ½

#### æµè§ˆè¡¨æƒ…åŒ…
- ä¸»é¡µæ˜¾ç¤º3åˆ—ç½‘æ ¼è§†å›¾
- æ¯ä¸ªè¡¨æƒ…åŒ…æ˜¾ç¤ºGIFåŠ¨ç”»

#### æ”¶è—åŠŸèƒ½
- ç‚¹å‡»è¡¨æƒ…åŒ…å³ä¸Šè§’çš„å¿ƒå½¢å›¾æ ‡
- çº¢è‰²è¡¨ç¤ºå·²æ”¶è—
- ç‚¹å‡»é¡¶éƒ¨æ”¶è—æŒ‰é’®æŸ¥çœ‹æ”¶è—åˆ—è¡¨

#### åˆ é™¤è¡¨æƒ…åŒ…
- é•¿æŒ‰è¡¨æƒ…åŒ…
- é€‰æ‹©"åˆ é™¤"é€‰é¡¹
- ç¡®è®¤åˆ é™¤

### 3. æµ‹è¯•å¾®ä¿¡åˆ†äº«

âš ï¸ **é‡è¦æç¤º**ï¼šå¾®ä¿¡åˆ†äº«éœ€è¦åœ¨çœŸæœºä¸Šæµ‹è¯•ï¼Œä¸”å¿…é¡»å®‰è£…å¾®ä¿¡

#### iOSæµ‹è¯•æ­¥éª¤
1. ç¡®ä¿å·²é…ç½®æ­£ç¡®çš„å¾®ä¿¡AppID
2. åœ¨çœŸæœºä¸Šè¿è¡Œåº”ç”¨
3. ç‚¹å‡»ä»»æ„è¡¨æƒ…åŒ…
4. é€‰æ‹©"åˆ†äº«åˆ°å¾®ä¿¡"
5. åº”ç”¨åº”è·³è½¬åˆ°å¾®ä¿¡ï¼Œæ˜¾ç¤ºGIFåŠ¨ç”»

#### Androidæµ‹è¯•æ­¥éª¤
1. ç¡®ä¿å·²é…ç½®æ­£ç¡®çš„å¾®ä¿¡AppIDå’Œåº”ç”¨ç­¾å
2. åœ¨çœŸæœºä¸Šè¿è¡Œåº”ç”¨
3. ç‚¹å‡»ä»»æ„è¡¨æƒ…åŒ…
4. é€‰æ‹©"åˆ†äº«åˆ°å¾®ä¿¡"
5. æ˜¾ç¤ºå¾®ä¿¡åˆ†äº«é€‰æ‹©å™¨

### 4. é¢„æœŸç»“æœ

âœ… **æˆåŠŸæƒ…å†µ**ï¼š
- åº”ç”¨è·³è½¬åˆ°å¾®ä¿¡
- GIFä¿æŒåŠ¨ç”»æ•ˆæœ
- å¯ä»¥é€‰æ‹©å‘é€ç»™å¥½å‹æˆ–æœ‹å‹åœˆ

âŒ **å¤±è´¥æƒ…å†µ**ï¼š
- æç¤º"æœªå®‰è£…å¾®ä¿¡" â†’ å®‰è£…å¾®ä¿¡
- æç¤º"åˆ†äº«å¤±è´¥" â†’ æ£€æŸ¥AppIDé…ç½®
- è·³è½¬å¾®ä¿¡åæ— ååº” â†’ æ£€æŸ¥åº”ç”¨ç­¾åé…ç½®

---

## å¸¸è§é—®é¢˜

### Q1: iOSç¼–è¯‘å¤±è´¥

**é—®é¢˜**ï¼š`Swift Compiler Error: Cannot find 'WeChatSharePlugin' in scope`

**è§£å†³**ï¼š
1. æ‰“å¼€ Xcode
2. é€‰æ‹© Product â†’ Clean Build Folder
3. é‡æ–°è¿è¡Œ `flutter run`

### Q2: Androidåˆ†äº«å¤±è´¥

**é—®é¢˜**ï¼šç‚¹å‡»åˆ†äº«æŒ‰é’®æ— ååº”

**è§£å†³**ï¼š
1. æ£€æŸ¥å¾®ä¿¡æ˜¯å¦å·²å®‰è£…
2. æ£€æŸ¥åº”ç”¨ç­¾åæ˜¯å¦å·²æäº¤åˆ°å¾®ä¿¡å¼€æ”¾å¹³å°
3. ç¡®ä¿ä½¿ç”¨æ­£å¼ç­¾åæ‰“åŒ…ï¼ˆè€Œédebugç­¾åï¼‰

### Q3: GIFä¸æ˜¾ç¤º

**é—®é¢˜**ï¼šä¸»é¡µä¸æ˜¾ç¤ºGIFå›¾ç‰‡

**è§£å†³**ï¼š
1. ç¡®è®¤ [`pubspec.yaml`](pubspec.yaml:61) ä¸­å·²é…ç½® assets
2. è¿è¡Œ `flutter pub get`
3. é‡æ–°å¯åŠ¨åº”ç”¨

### Q4: æ•°æ®åº“é”™è¯¯

**é—®é¢˜**ï¼š`Database is locked` æˆ– `table not found`

**è§£å†³**ï¼š
```bash
# æ¸…é™¤åº”ç”¨æ•°æ®
flutter clean
flutter pub get
flutter run
```

### Q5: iOSçœŸæœºè°ƒè¯•

**é—®é¢˜**ï¼šæ— æ³•åœ¨çœŸæœºä¸Šè¿è¡Œ

**è§£å†³**ï¼š
1. åœ¨ Xcode ä¸­é…ç½®å¼€å‘å›¢é˜Ÿ
2. è¿æ¥è®¾å¤‡å¹¶ä¿¡ä»»å¼€å‘è€…è¯ä¹¦
3. åœ¨è®¾å¤‡ä¸Šæ‰“å¼€ï¼šè®¾ç½® â†’ é€šç”¨ â†’ è®¾å¤‡ç®¡ç† â†’ ä¿¡ä»»

---

## å¼€å‘è°ƒè¯•

### æŸ¥çœ‹æ—¥å¿—

```bash
# Flutteræ—¥å¿—
flutter logs

# iOSæ—¥å¿—ï¼ˆXcodeï¼‰
Xcode â†’ Window â†’ Devices and Simulators â†’ é€‰æ‹©è®¾å¤‡ â†’ Open Console

# Androidæ—¥å¿—
adb logcat | grep flutter
```

### çƒ­é‡è½½

å¼€å‘è¿‡ç¨‹ä¸­ä¿®æ”¹ä»£ç åï¼š
```bash
# åœ¨è¿è¡Œçš„ç»ˆç«¯ä¸­æŒ‰ 'r' çƒ­é‡è½½
r

# æˆ–æŒ‰ 'R' çƒ­é‡å¯
R
```

---

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **å›¾ç‰‡å‹ç¼©**ï¼šè¡¨æƒ…åŒ…GIFå»ºè®®æ§åˆ¶åœ¨500KBä»¥å†…
2. **ç¼“å­˜ç®¡ç†**ï¼šå®šæœŸæ¸…ç†ç¼“å­˜ç›®å½•
3. **æ•°æ®åº“ä¼˜åŒ–**ï¼šå®šæœŸæ¸…ç†ä¸ç”¨çš„è¡¨æƒ…åŒ…
4. **å†…å­˜ç®¡ç†**ï¼šé¿å…åŒæ—¶åŠ è½½è¿‡å¤šå¤§GIF

---

## ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### iOSå‘å¸ƒ

```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·
# ç¼–è¾‘ pubspec.yaml ä¸­çš„ version

# 2. æ„å»ºå‘å¸ƒç‰ˆæœ¬
flutter build ios --release

# 3. åœ¨ Xcode ä¸­æ‰“å¼€é¡¹ç›®
open ios/Runner.xcworkspace

# 4. Product â†’ Archive
# 5. ä¸Šä¼ åˆ° App Store Connect
```

### Androidå‘å¸ƒ

```bash
# 1. é…ç½®ç­¾åï¼ˆå‚è§ä¸Šæ–‡ï¼‰

# 2. æ„å»ºAPK
flutter build apk --release

# 3. æˆ–æ„å»ºApp Bundle
flutter build appbundle --release

# 4. ä¸Šä¼ åˆ° Google Play Console
```

---

## æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹ [README.md](README.md)
2. æ£€æŸ¥ Flutter å®˜æ–¹æ–‡æ¡£
3. æŸ¥çœ‹å¾®ä¿¡å¼€æ”¾å¹³å°æ–‡æ¡£
4. æäº¤ Issue

---

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-01-01)
- âœ… åˆå§‹ç‰ˆæœ¬
- âœ… æ”¯æŒGIFè¡¨æƒ…åŒ…ç®¡ç†
- âœ… æ”¯æŒå¾®ä¿¡åˆ†äº«ï¼ˆä¿æŒåŠ¨ç”»ï¼‰
- âœ… æ”¯æŒæ”¶è—åŠŸèƒ½
- âœ… æ”¯æŒæœ¬åœ°æ•°æ®åº“å­˜å‚¨